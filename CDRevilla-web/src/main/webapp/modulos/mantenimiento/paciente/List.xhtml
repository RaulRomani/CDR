<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

  <ui:composition template="/templates/templateCool.xhtml">


    <ui:define name="title">
      <h:outputText value="#{bundle.ListPacienteTitle}"></h:outputText>
    </ui:define>

    <ui:define name="resources">
      <h:outputScript name="/js/scripts.js"/>
    </ui:define>


    <ui:define name="body">

      <h:form id="PacienteCreateEditForm" enctype="multipart/form-data" acceptcharset="ISO-8859-1">
        <h:panelGroup id="PacienteFields">


          <div class="container">
            <div class="row" >

              <!--<h2>Datos personales</h2>-->
              <div class="col-lg-2">
                <p:graphicImage id="showImage"
                                alt="Foto" 
                                class="MostrarImagen" width="150px"
                                value="#{pacienteController.image}"
                                cache="false"/>

                <p:fileUpload id="CargarImagen"
                              value="#{pacienteController.file}" 
                              update="showImage"
                              allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                              mode="simple" skinSimple="true"
                              label="Elegir"/>
              </div>

              <div class="col-lg-4">
                <div class="form-group row">
                  <div class="col-sm-3">
                    <p:outputLabel class="form-control-label" 
                                   value="#{bundle.CreatePacienteLabel_nombre}" 
                                   for="nombre" />
                  </div>
                  <div class="col-sm-9">
                    <p:inputText class="form-control" id="nombre" 
                                 value="#{pacienteController.selected.nombre}" 
                                 title="#{bundle.CreatePacienteTitle_nombre}" 
                                 required="true" 
                                 requiredMessage="#{bundle.CreatePacienteRequiredMessage_nombre}"/>
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-3">
                    <p:outputLabel class="form-control-label" value="#{bundle.CreatePacienteLabel_apelllidos}" for="apelllidos" />
                  </div>
                  <div class="col-sm-9">
                    <p:inputText class="form-control" id="apelllidos" value="#{pacienteController.selected.apelllidos}" title="#{bundle.CreatePacienteTitle_apelllidos}" required="true" requiredMessage="#{bundle.CreatePacienteRequiredMessage_apelllidos}"/>
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-3">
                    <p:outputLabel class="form-control-label" value="#{bundle.CreatePacienteLabel_dni}" for="dni" />
                  </div>
                  <div class="col-sm-9">
                    <p:inputText class="form-control" id="dni" value="#{pacienteController.selected.dni}" title="#{bundle.CreatePacienteTitle_dni}" required="true" requiredMessage="#{bundle.CreatePacienteRequiredMessage_dni}"/>
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-3">
                    <p:outputLabel class="form-control-label" value="#{bundle.CreatePacienteLabel_direccion}" for="direccion" />
                  </div>
                  <div class="col-sm-9">
                    <p:inputText class="form-control" id="direccion" value="#{pacienteController.selected.direccion}" title="#{bundle.CreatePacienteTitle_direccion}" required="true" requiredMessage="#{bundle.CreatePacienteRequiredMessage_direccion}"/>
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-3">
                    <p:outputLabel class="form-control-label" value="#{bundle.CreatePacienteLabel_celular}" for="celular" />
                  </div>
                  <div class="col-sm-9">
                    <p:inputText class="form-control" id="celular" value="#{pacienteController.selected.celular}" title="#{bundle.CreatePacienteTitle_celular}" required="true" requiredMessage="#{bundle.CreatePacienteRequiredMessage_celular}"/>
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-3">
                    <p:outputLabel class="form-control-label" value="#{bundle.CreatePacienteLabel_sexo}" for="sexo" />
                  </div>
                  <div class="col-sm-9">

                    <p:selectOneRadio id="sexo" 
                                      value="#{pacienteController.selected.sexo}"
                                      required="true" requiredMessage="#{bundle.CreatePacienteRequiredMessage_sexo}"
                                      >
                      <f:selectItem itemLabel="Masculino" itemValue="MASCULINO" />
                      <f:selectItem itemLabel="Femenino" itemValue="FEMENINO" />
                    </p:selectOneRadio>
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-3">
                    <p:outputLabel class="form-control-label" value="#{bundle.CreatePacienteLabel_edad}" for="edad" />
                  </div>
                  <div class="col-sm-3">
                    <p:inputText class="form-control" id="edad" value="#{pacienteController.selected.edad}" title="#{bundle.CreatePacienteTitle_edad}" required="true" requiredMessage="#{bundle.CreatePacienteRequiredMessage_edad}"/>
                  </div>
                </div>
              </div>
              <div class="col-lg-6">
                <div class="form-group row">
                  <div class="col-sm-3">
                    <p:outputLabel class="form-control-label" value="#{bundle.CreatePacienteLabel_lugarNacimiento}" for="lugarNacimiento" />
                  </div>
                  <div class="col-sm-8">
                    <p:inputText class="form-control" id="lugarNacimiento" value="#{pacienteController.selected.lugarNacimiento}" title="#{bundle.CreatePacienteTitle_lugarNacimiento}" />
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-3">
                    <p:outputLabel class="form-control-label" value="#{bundle.CreatePacienteLabel_raza}" for="raza" />
                  </div>
                  <div class="col-sm-8">
                    <p:inputText class="form-control" id="raza" value="#{pacienteController.selected.raza}" title="#{bundle.CreatePacienteTitle_raza}"/>
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-3">
                    <p:outputLabel class="form-control-label" value="#{bundle.CreatePacienteLabel_gradoInstruccion}" for="gradoInstruccion" />
                  </div>
                  <div class="col-sm-8">
                    <p:inputText class="form-control" id="gradoInstruccion" value="#{pacienteController.selected.gradoInstruccion}" title="#{bundle.CreatePacienteTitle_gradoInstruccion}"/>
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-3">
                    <p:outputLabel class="form-control-label" value="#{bundle.CreatePacienteLabel_ocupación}" for="ocupacion" />
                  </div>
                  <div class="col-sm-8">
                    <p:inputText class="form-control" id="ocupacion" value="#{pacienteController.selected.ocupación}" title="#{bundle.CreatePacienteTitle_ocupación}"/>
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-3">
                    <p:outputLabel class="form-control-label" value="#{bundle.CreatePacienteLabel_religion}" for="religion" />
                  </div>
                  <div class="col-sm-8">
                    <p:inputText class="form-control" id="religion" value="#{pacienteController.selected.religion}" title="#{bundle.CreatePacienteTitle_religion}"/>
                  </div>
                </div>
                <div class="form-group row">
                  <div class="col-sm-3">
                    <p:outputLabel class="form-control-label" value="#{bundle.CreatePacienteLabel_estadoCivil}" for="estadoCivil" />
                  </div>
                  <div class="col-sm-8">
                    <p:inputText class="form-control" id="estadoCivil" value="#{pacienteController.selected.estadoCivil}" title="#{bundle.CreatePacienteTitle_estadoCivil}"/>
                  </div>
                </div>


              </div>

            </div>
          </div>
          <div class="footerForm" align="center">
            <p:commandButton id="createButton" icon="ui-icon-plus"   
                             value="#{pacienteController.selected.idPaciente eq null ? bundle.Create:bundle.Save }" 
                             actionListener="#{pacienteController.create()}" 
                             update="PacienteListForm:datalist,:growl" 
                             ajax="false"/>

            <p:commandButton id="cleanFieldsButton" 
                             icon="fa fa-eraser"
                             value="Limpiar" 
                             process="@this"
                             update="PacienteFields"
                             actionListener="#{pacienteController.clean()}"
                             ajax="true"
                             />
          </div>
        </h:panelGroup>
      </h:form>


      <h:form id="PacienteListForm">

        <div class="container">
          <p:dataTable id="datalist" value="#{pacienteController.items}" var="item"
                       class="pacienteList"
                       selectionMode="single" selection="#{pacienteController.selected}"
                       paginator="true"
                       rowKey="#{item.idPaciente}"
                       rows="10"
                       rowsPerPageTemplate="10,20,30,40,50"
                       >

            <p:column>
              <f:facet name="header">
                <h:outputText value="#{bundle.ListPacienteTitle_idPaciente}"/>
              </f:facet>
              <h:outputText value="#{item.idPaciente}"/>
            </p:column>
            <p:column filterBy="#{item.nombre}" filterMatchMode="contains">
              <f:facet name="header">
                <h:outputText value="#{bundle.ListPacienteTitle_nombre}"/>
              </f:facet>
              <h:outputText value="#{item.nombre}"/>
            </p:column>
            <p:column>  
              <f:facet name="header">
                <h:outputText value="#{bundle.ListPacienteTitle_apelllidos}"/>
              </f:facet>
              <h:outputText value="#{item.apelllidos}"/>
            </p:column>
            <p:column>
              <f:facet name="header">
                <h:outputText value="#{bundle.ListPacienteTitle_dni}"/>
              </f:facet>
              <h:outputText value="#{item.dni}"/>
            </p:column>
            <p:column>
              <f:facet name="header">
                <h:outputText value="#{bundle.ListPacienteTitle_direccion}"/>
              </f:facet>
              <h:outputText value="#{item.direccion}"/>
            </p:column>
            <p:column>
              <f:facet name="header">
                <h:outputText value="#{bundle.ListVentaTitle_fecha}"/>
              </f:facet>
              <h:outputText value="#{item.fecha}">
                <f:convertDateTime pattern="dd/MM/yyyy" />
              </h:outputText>
            </p:column>
            <p:column>
              <f:facet name="header">
                <h:outputText value="#{bundle.ListPacienteTitle_celular}"/>
              </f:facet>
              <h:outputText value="#{item.celular}"/>
            </p:column>
            <p:column>
              <f:facet name="header">
                <h:outputText value="#{bundle.ListPacienteTitle_sexo}"/>
              </f:facet>
              <h:outputText value="#{item.sexo}"/>
            </p:column>
            <p:column>
              <f:facet name="header">
                <h:outputText value="#{bundle.ListPacienteTitle_edad}"/>
              </f:facet>
              <h:outputText value="#{item.edad}"/>
            </p:column>
            <p:column headerText="Acciones" width="200px">
              <div style="display: inline-block;">
                <p:commandLink actionListener="#{pacienteController.loadPacienteSelected(item.idPaciente)}"
                               update="PacienteCreateEditForm"
                               class="btn btn-sm btn-primary action-btn"
                               ajax="false">
                  <i class="glyphicon glyphicon-pencil"></i>
                </p:commandLink>
              </div>
              <div style="display: inline-block;">
                <p:commandLink actionListener="#{pacienteController.destroy(item.idPaciente)}" 
                               class="btn btn-sm btn-danger action-btn"
                               update=":PacienteListForm:datalist">
                  <i class="glyphicon glyphicon-trash"></i>
                  <p:confirm header="Confirmación" message="¿Estas seguro(a) de eliminar este registro?" icon="ui-icon-alert"/>
                </p:commandLink>
              </div>
              <p:confirmDialog global="true">
                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close"/>
              </p:confirmDialog>
            </p:column>
          </p:dataTable>
        </div>
      </h:form>

    </ui:define>
  </ui:composition>

</html>
